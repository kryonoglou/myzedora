RewriteEngine On

# ----------------------------------------
# Direct routes: Sitemap, robots, terms
# ----------------------------------------
RewriteRule ^sitemap\.xml$          includes/sitemap.php              [L]
RewriteRule ^robots\.txt$           includes/robots.php               [L]
RewriteRule ^terms/?$               view/terms/index.php              [L]

# ----------------------------------------
# User routes
# ----------------------------------------
RewriteRule ^login/?$               usr/login/index.php               [L]
RewriteRule ^register/?$            usr/register/index.php            [L]
RewriteRule ^forgot-password/?$     usr/forgot_password/index.php     [L]

# ----------------------------------------
# Routes with parameters
# ----------------------------------------
RewriteRule ^post/([^/]+)/?$        view/post/index.php?slug=$1       [L]
RewriteRule ^project/([^/]+)/?$     view/project/index.php?slug=$1    [L]
RewriteRule ^@([^/]+)/?$            usr/profile/index.php?username=$1 [L]

# ----------------------------------------
# Listing routes
# ----------------------------------------
RewriteRule ^posts/?$               view/posts/index.php              [L]
RewriteRule ^projects/?$            view/projects/index.php           [L]
RewriteRule ^members/?$             view/members/index.php            [L]

# ----------------------------------------
# Fallback for all other URLs
# - Skip if the file or directory exists
# - Forward remaining to view/page.php
# ----------------------------------------
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$                  view/page.php?path=$1             [QSA,L]
